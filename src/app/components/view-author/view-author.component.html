<section>
  <form (submit)="onSearchAuthor()">
    <mat-form-field appearance="outline">
      <mat-label>Search for an Author</mat-label>
      <input
        matInput
        [(ngModel)]="searchedAuthorName"
        name="authorName"
        required
      />
    </mat-form-field>
    <button mat-raised-button type="submit">Search</button>
  </form>

  <mat-card *ngIf="authors">
    <mat-card-title> Authors</mat-card-title>
    <ul>
      <li *ngFor="let author of authors?.authorList">{{ author }}</li>
    </ul>
  </mat-card>

  <mat-card *ngIf="author">
    <mat-card-title>Author: {{ author.author }}</mat-card-title>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title> {{ author.author }}'s Authorship</mat-panel-title>
      </mat-expansion-panel-header>

      <ng-container *ngFor="let file of author.files">
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title> File: {{ file.name }} </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-list>
            <!-- Previous CID -->
            <mat-list-item *ngIf="file.cids.previous">
              <mat-icon>history</mat-icon>
              Previous CID:
              <span matBadgeColor="accent">{{ file.cids.previous }}</span>
            </mat-list-item>

            <!-- Current CID -->
            <mat-list-item>
              <mat-icon>check_circle</mat-icon>
              Current CID:
              <span matBadgeColor="primary">{{ file.cids.current }}</span>
            </mat-list-item>
          </mat-list>
        </mat-expansion-panel>
      </ng-container>
    </mat-expansion-panel>
  </mat-card>
</section>
